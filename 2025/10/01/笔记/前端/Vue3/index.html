<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><!-- 修复 page.tags.data 可能为 undefined 的问题，避免调用 map 时出错--><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Vue3笔记 | DotRedStone</title><meta name="author" content="DotRedStone"><meta name="copyright" content="DotRedStone"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#fbf1c7"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Vue3笔记"><meta name="application-name" content="Vue3笔记"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#fbf1c7"><meta property="og:type" content="article"><meta property="og:title" content="Vue3笔记"><meta property="og:url" content="http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/index.html"><meta property="og:site_name" content="DotRedStone"><meta property="og:description" content="一、创建Vue3工程1234npm create vite@latest vue3-project --template vue-tscd vue3-projectnpm installnpm run dev 二、编写App组件.&amp;#x2F;src&amp;#x2F;main.ts 123import &amp;amp;#"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://blog.dotops.top/img/DotRedStone.jpg"><meta property="article:author" content="DotRedStone"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://blog.dotops.top/img/DotRedStone.jpg"><meta name="description" content="一、创建Vue3工程1234npm create vite@latest vue3-project --template vue-tscd vue3-projectnpm installnpm run dev 二、编写App组件.&amp;#x2F;src&amp;#x2F;main.ts 123import &amp;amp;#"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"Dot","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":1000,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: {"enable":true,"ck":null,"LingQueMonitorID":null},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color.dotres.cn/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 乐于分享与帮助","🏠 架构推翻底层改","🤖 社交 A I代练中","🧱 人形自走脚手架","🏃 行动力强执行派","💥 为了驱蚊造大炮","💢 打码一周瘦五斤"]},
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: DotRedStone","link":"链接: ","source":"来源: DotRedStone","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'DotRedStone',
  title: 'Vue3笔记',
  postAI: '',
  pageFillDescription: '一、创建Vue3工程, 二、编写App组件, 三、核心语法, 1. setup(), 1. 概述, 2. 返回值, 3. Setup()与OptionsAPI, 4. 语法糖, 2. 响应式, 1. ref定义基本类型数据, 2. reactive定义对象类型的数据, 3. ref定义对象类型的数据, 4. ref对比reactive, 1. 宏观角度, 2. 区别, 3.使用原则, 5.toRefs与toRef, 3. computed(), 4. watch(), 情况一, 情况二, 情况三, 情况四, 情况五, 5. watchEffect(), 6. 标签的ref属性, 7. props, 8. 生命周期, 1. Vue2 生命周期, 2. Vue3 生命周期, 9. Hooks, 四、路由, 1. 安装路由器组件, 2. 基本切换效果, 3. 注意事项, 4. 路由器工作模式, 5. to的两种写法, 6. 命名路由, 7. 嵌套路由, 8. query参数, 9. params参数, 10. props配置, 10. replace属性, 10. 编程式路由导航, 11. 重定向, 五、pinia, 1. 搭建pinia环境, 2. 存储读取数据, 3. 修改数据, 4. storeToRefs(), 5. getters, 6. 96$subscribe(), 7. store的组合式写法, 六、组件通信, 1. props, 2. 自定义事件, 3. mitt, 4. v-model, 5. $attrs, 6. $refs与$parent, 7. provide与inject, 8. 插槽, 1. 默认插槽, 2. 具名插槽, 3. 作用域插槽, 七、其他API, 1. shallowRef与shallowReactive, 2. readonly与shallowReadonly, ​​区别与选择​​, 3. toRaw与markRaw, toRaw​​：, markRaw​​：, 4. customRef, 1. 防抖x2F节流​：延迟触发视图更新, 2. 本地存储同步：自动读写 localStorage。, 八、Vue3新组件, 1. teleport, 2. suspense, 3. 全局API转移到应用对象, 4. 其他一创建工程二编写组件写或代码写的框架写样式三核心语法概述已经开始弱化了此时的和不是响应式的返回值当返回值是一个渲染函数时返回内容会直接渲染到页面与可以读到中的报错读不到的数据语法糖在加属性可以省略和部分可以用宏定义来设置组件名称响应式定义基本类型数据加让数据变成对象对值进行修改自动解包不需要定义对象类型的数据奔驰一辆车价值万修改汽车价格只能定义对象类型响应数据定义对象类型的数据略对比宏观角度用来定义基本类型数据对象类型数据用来定义对象类型数据区别创建变量必须使用可以用插件自动加重新分配一个新对象会失去响应式可以用去整体替换使用原则若需要一个基本类型的响应式数据必须用若需要一个响应式对象层级不深和都可以若需要一个响应式对象且层级较深建议使用与新版本直接解构即可不再会丢失响应性使用对响应式对象进行解构赋值确保解构后的和仍保持响应性解构后的属性需通过访问与原始响应式对象属性双向绑定张三姓名全名会缓存计算结果只有当其依赖的响应式数据如或变量发生变化时才会重新计算是只读的使用注释的方法可以实现可读写作用监视数据的变化特点中的只能监视以下四种数据定义的数据定义的数据函数返回一个值函数一个包含上述的数组情况一监视定义的基本类型数据当前求和为函数会返回一个停止监听的函数调用该函数可以停止监视第二个参数中的和指向的是地址情况二监视定义的对象类型数据姓名年龄改名字改年龄改人若按情况一的写法只会监视对象的地址值而不关心对象属性的变化若想监视内部属性则需要手动开启深度监视可以在开始是调用的回调函数等于情况三监视定义的对象类型数据姓名年龄改名字改年龄改人默认开启深度监视且不可关闭情况四监视或定义的对象类型数据中的某个属性注意以下几点若该属性值不是对象类型需要改写为函数形式若该属性值仍是对象类型可以直接写但建议也写成函数否则在该属性整体改变时依赖追踪失效导致监听不触发奔驰宝马小米理想爱玛雅迪姓名年龄汽车改名字改年龄改第一台车改第二台车改全部车情况五监视上述多个数据奔驰宝马小米理想爱玛雅迪姓名年龄汽车改名字改年龄改第一台车改第二台车改全部车实现实现当前水温为当前水位为自动追踪回调函数内使用的响应式数据如和无需显式声明依赖初始化时立即执行一次回调用于捕获初始状态无法直接获取变化前的值标签的属性中国青海西宁推荐使用标签的属性来获取元素而不是根据进行操作因为容器是局部的而操作容易获取到其他组件的元素中国青海西宁当父组件通过属性来获得子组件的元素时默认是无法获取任何元素的必须在子组件通过将对象暴露把列表传给组件只接收必须写成数组的形式接收类型限制接收类型限制限制必要性指定默认值默认姓名生命周期组件的生命周期创建挂载更新销毁生命周期生命周期钩子创建挂载更新销毁生命周期生命周期钩子创建在函数中便是创建阶段挂载更新销毁求和计数通过将上述组件脚本中的不同功能的数据和函数封装求和计数四路由安装路由器组件基本切换效果这是一个测试组件主页注意事项路由组件一般放在或文件夹一般组件放在文件夹通过点击导航视觉效果消失了的路由组件默认是被卸载的需要时会重新挂载路由器工作模式模式优点更加美观不带更接近传统网站缺点后期项目上线需要服务端配合处理路径问题否则刷新会用错误模式优点兼容性更好因为不需要服务端处理路径缺点带不太美观而且在优化方面相对较差的两种写法关于下面会讲到命名路由命名路由主页关于新闻嵌套路由如何学好前端菜就多练最好的语言国庆假期该干什么睡觉编号标题内容主页关于详情子路径无前导斜杠新闻参数编号标题内容如何学好前端菜就多练最好的语言国庆假期该干什么睡觉第一种写法第二种写法参数编号标题内容如何学好前端菜就多练最好的语言国庆假期该干什么睡觉第一种写法第二种写法详情主页关于详情需用占位符占位问号表示可传可不传新闻传递参数时必须在路由规则里提前占位传递参数时对象写法传参必须用不能用配置编号标题内容如何学好前端菜就多练最好的语言国庆假期该干什么睡觉第一种写法第二种写法详情主页关于详情需用占位符占位问号表示可传可不传第一种方法将路由收到的参数作为传给路由组件第二种方法函数写法自由决定将什么参数作为传给路由组件第三种方法对象写法自由决定将什么参数作为传给路由组件写死的应用场景少新闻属性加上属性后跳转后不再可以使用浏览器的回退回退上一页默认情况是模式编程式路由导航主页传参方式和的属性相同重定向主页关于详情需用占位符占位问号表示可传可不传新闻将路径重定向到路径五搭建环境引入创建安装存储读取数据计数修改数据第一种方式第二种方式第三种方式计数直接修改直接操作状态属性每次修改都会触发独立的响应式更新在中会产生多条记录批量修改将多个修改合并为一次响应式更新在中只显示一条记录减少响应式触发次数适合性能优化修改在中定义方法支持参数传递异步操作和复杂业务逻辑提高代码复用性和可维护性计数对进行解构赋值时若直接使用会将所有属性包括方法强制转换为响应式引用造成不必要的性能开销推荐使用它仅针对和生成响应式引用避免对等非状态数据做无效处理从而优化性能中数据发生了变化当值发生变化后将新数据存入浏览器缓存计数的值优先从用户的浏览器缓存中获取通过订阅可以实现网页刷新数据不丢失的组合式写法六组件通信宝马父组件孩子的玩具乐高子组件玩具礼物把玩具给父亲父组件在创建子组件时直接在子标签中加属性即可将参数传给子组件子组件只需用方法接收父组件给的参数即可子组件给父组件传参数则需要父组件将一函数传给子组件子组件通过该函数的传参将参数传给父组件自定义事件父组件孩子的玩具乐高子组件玩具把玩具给父亲引入调用暴露乐高子组件玩具把玩具给弟弟联想在该组件卸载时解绑事件子组件电脑玩具父组件用在标签以下两种写法等效用在组件标签以下两种写法等效值是可以自定义的父组件子组件乐高孙组件父组件给子组件传的参数若没有被接收将会以一个对象的形式保存在里通过调用该对象与父组件房产给全部孩子买书华为子组件电脑书卖掉父亲一套房产乐高子组件玩具书包含所有被属性标识的元素或组件实例当前组件的父组件实例对象与宝马向后代提供数据父组件车价格钱子组件孙组件车价格钱修改插槽默认插槽我的世界王者荣耀英雄联盟绝地求生热门游戏列表今日美食城市今日影视推荐默认内容在子组件中使用定义内容分发出口父组件调用时可在子组件标签内部插入任意模板内容如动态数据其他组件这些内容将自动替换子组件中的位置若父组件未提供内容则显示标签内的默认内容具名插槽我的世界王者荣耀英雄联盟绝地求生默认内容默认内容在子组件中通过定义多个命名分发出口父组件调用时需通过或将内容精准插入对应名称的插槽位置作用域插槽我的世界王者荣耀英雄联盟绝地求生子组件通过的绑定数据如将内部数据暴露给父组件父组件通过接收子组件传递的数据如或解构并自定义渲染逻辑七其他与响应式层级典型场景示例仅层元素引用大型对象性能优化仅对象顶层属性表单字段仅需监听字段增减无需深度响应性能优化避免深度递归转换嵌套属性减少内存和计算开销手动触发更新需通过强制更新视图如直接修改内部属性时与区别与选择特性只读深度递归所有嵌套属性仅顶层属性性能影响较高递归处理较低使用场景全局配置保护部分保护嵌套数据可修改示例代码深度只读保护整个对象警告并阻止修改浅层只读允许修改嵌套属性可修改与返回响应式对象的原始非代理对象操作原始对象不会触发视图更新场景与非库交互时避免响应式干扰如传给标记对象永不转为响应式适用于静态数据或第三方类库实例保持非响应式自定义的依赖跟踪和更新触发逻辑防抖节流延迟触发视图更新本地存储同步自动读写八新组件标签可以将对应内容传送到对应位置父组件标题加载中在子组件有异步操作时异步完毕后显示的异步操作进行中显示的内容全局转移到应用对象其他',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-09 20:45:56',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#282828')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fbf1c7')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/img/DotRedStone.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="/css/loading-bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">存储服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://filecodebox.dotres.cn/" title="FileCodeBox"><img class="back-menu-item-icon" src="/img/svg/CloudFile.svg" alt="FileCodeBox"/><span class="back-menu-item-text">FileCodeBox</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://cloudreve.dotres.cn/" title="Cloudreve"><img class="back-menu-item-icon" src="/img/svg/CloudFolder.svg" alt="Cloudreve"/><span class="back-menu-item-text">Cloudreve</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://openlist.dotres.cn/" title="Openlist"><img class="back-menu-item-icon" src="/img/svg/CloudDrive.svg" alt="Openlist"/><span class="back-menu-item-text">Openlist</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">AI</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://nextchat.dotres.cn/" title="NextChat"><img class="back-menu-item-icon" src="/img/svg/AI.svg" alt="NextChat"/><span class="back-menu-item-text">NextChat</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://lobechat.dotres.cn/" title="NextChat"><img class="back-menu-item-icon" src="/img/svg/AI.svg" alt="NextChat"/><span class="back-menu-item-text">NextChat</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">在线开发环境</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitea.dotres.cn/" title="Gitea"><img class="back-menu-item-icon" src="/img/svg/git.svg" alt="Gitea"/><span class="back-menu-item-text">Gitea</span></a><a class="back-menu-item" href="/code/" title="code-server"><img class="back-menu-item-icon" src="/img/svg/CloudCode.svg" alt="code-server"/><span class="back-menu-item-text">code-server</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">DotRedStone</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/nav/"><span> 导航</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/png/wx.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="/img/png/wx.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/png/al.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="/img/png/al.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/Cpp/" style="font-size: 1.05rem;">Cpp<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 1.05rem;">TypeScript<sup>1</sup></a><a href="/tags/Vue3/" style="font-size: 1.05rem;">Vue3<sup>1</sup></a><a href="/tags/easytier/" style="font-size: 1.05rem;">easytier<sup>1</sup></a><a href="/tags/jetbrains/" style="font-size: 1.05rem;">jetbrains<sup>1</sup></a><a href="/tags/p2p/" style="font-size: 1.05rem;">p2p<sup>1</sup></a><a href="/tags/vpn/" style="font-size: 1.05rem;">vpn<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url">前端</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/Vue3/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>Vue3</span></a></span></div></div><h1 class="post-title" itemprop="name headline">Vue3笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-09-30T16:00:00.000Z" title="发表于 2025-10-01 00:00:00">2025-10-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-10-09T12:45:56.132Z" title="更新于 2025-10-09 20:45:56">2025-10-09</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span id="" data-flag-title="Vue3笔记"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span class="waline-pageview-count" data-path="/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/" title="访问量"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为西宁"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>西宁</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/#post-comment"><span class="waline-comment-count" data-path="/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/"><header><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url">前端</a><a href="/tags/Vue3/" tabindex="-1" itemprop="url">Vue3</a><h1 id="CrawlerTitle" itemprop="name headline">Vue3笔记</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">DotRedStone</span><time itemprop="dateCreated datePublished" datetime="2025-09-30T16:00:00.000Z" title="发表于 2025-10-01 00:00:00">2025-10-01</time><time itemprop="dateCreated datePublished" datetime="2025-10-09T12:45:56.132Z" title="更新于 2025-10-09 20:45:56">2025-10-09</time></header><h1 id="一、创建Vue3工程"><a href="#一、创建Vue3工程" class="headerlink" title="一、创建Vue3工程"></a>一、创建Vue3工程</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm create vite@latest vue3-project --template vue-ts</span><br><span class="line"><span class="built_in">cd</span> vue3-project</span><br><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>
<h1 id="二、编写App组件"><a href="#二、编写App组件" class="headerlink" title="二、编写App组件"></a>二、编写App组件</h1><p>.&#x2F;src&#x2F;main.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;  </span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;  </span><br><span class="line"><span class="title function_">createApp</span>(<span class="title class_">App</span>).<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>.&#x2F;src&#x2F;App.vue</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写js或ts代码</span></span><br><span class="line">&lt;script lang=<span class="string">&quot;ts&quot;</span>&gt;  </span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;  </span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>  </span><br><span class="line">  &#125;  </span><br><span class="line">&lt;/script&gt;  </span><br><span class="line"><span class="comment">// 写web的html框架</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app&quot;</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>hahaha!<span class="tag">&lt;/<span class="name">p</span>&gt;</span>  </span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span>  </span><br><span class="line"><span class="comment">// 写css样式</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css">  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="selector-class">.app</span> &#123;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">background-color</span>: gray;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">padding</span>: <span class="number">20px</span>;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  &#125;  </span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h1 id="三、核心语法"><a href="#三、核心语法" class="headerlink" title="三、核心语法"></a>三、核心语法</h1><h2 id="1-setup"><a href="#1-setup" class="headerlink" title="1. setup()"></a>1. <code>setup()</code></h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1. 概述"></a>1. 概述</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;  </span><br><span class="line">  import &#123;defineComponent&#125; from &quot;vue&quot;;  </span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name: &#x27;App&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">	  let name = &quot;xxx&quot;;</span><br><span class="line">	  let age = 18;</span><br><span class="line">	  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">	  function changeName() &#123;</span><br><span class="line">		  name = &#x27;xx&#x27;;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function changeAge() &#123;</span><br><span class="line">		  age += 1;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function showTel() &#123;</span><br><span class="line">		  alert(tel);</span><br><span class="line">	  &#125;</span><br><span class="line">	  return &#123;name, age, tel, changeName, changeAge, showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Vue3已经开始弱化this了<br>此时的name和age不是响应式的</p>
</blockquote>
<h3 id="2-返回值"><a href="#2-返回值" class="headerlink" title="2. 返回值"></a>2. 返回值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;  </span><br><span class="line">  import &#123;defineComponent&#125; from &quot;vue&quot;;  </span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name: &#x27;App&#x27;,</span><br><span class="line">    setup()&#123;</span><br><span class="line">	  let name = &quot;xxx&quot;;</span><br><span class="line">	  let age = 18;</span><br><span class="line">	  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">	  function changeName() &#123;</span><br><span class="line">		  name = &#x27;xx&#x27;;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function changeAge() &#123;</span><br><span class="line">		  age += 1;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function showTel() &#123;</span><br><span class="line">		  alert(tel);</span><br><span class="line">	  &#125;</span><br><span class="line">	  return () =&gt; &#x27;haha&#x27; </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当<code>setup()</code>返回值是一个渲染函数时，返回内容会直接渲染到页面。</p>
</blockquote>
<h3 id="3-Setup-与OptionsAPI"><a href="#3-Setup-与OptionsAPI" class="headerlink" title="3. Setup()与OptionsAPI"></a>3. <code>Setup()</code>与OptionsAPI</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;  </span><br><span class="line">  import &#123;defineComponent&#125; from &quot;vue&quot;;  </span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name: &#x27;App&#x27;,</span><br><span class="line">    data() &#123;</span><br><span class="line">	  a: 100,</span><br><span class="line">	  c: this.name,// 可以读到setup中的name</span><br><span class="line">	  d: 900</span><br><span class="line">    &#125;,</span><br><span class="line">    method: &#123;</span><br><span class="line">	  b() &#123;</span><br><span class="line">	    console.log(&#x27;b&#x27;);</span><br><span class="line">	  &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setup() &#123;</span><br><span class="line">	  let name = &quot;xxx&quot;;</span><br><span class="line">	  let age = 18;</span><br><span class="line">	  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">	  let e = d; // 报错，setup()读不到data的数据</span><br><span class="line">	  function changeName() &#123;</span><br><span class="line">		  name = &#x27;xx&#x27;;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function changeAge() &#123;</span><br><span class="line">		  age += 1;</span><br><span class="line">	  &#125;</span><br><span class="line">	  function showTel() &#123;</span><br><span class="line">		  alert(tel);</span><br><span class="line">	  &#125;</span><br><span class="line">	  return &#123;name, age, tel, changeName, changeAge, showTel&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="4-语法糖"><a href="#4-语法糖" class="headerlink" title="4. 语法糖"></a>4. 语法糖</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot;&gt;  </span><br><span class="line">  import &#123;defineComponent&#125; from &quot;vue&quot;;  </span><br><span class="line">  export default defineComponent(&#123;</span><br><span class="line">    name: &#x27;App&#x27;</span><br><span class="line">  &#125;)  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;  </span><br><span class="line">  let name = &quot;xxx&quot;;</span><br><span class="line">  let age = 18;</span><br><span class="line">  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">	  name = &#x27;xx&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">	  age += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">	  alert(tel);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在<code>&lt;script&gt;</code>加<code>setup</code>属性可以省略<code>setup()</code>和<code>return</code>部分 </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  defineOptions(&#123; name: &#x27;App&#x27; &#125;);</span><br><span class="line">  let name = &quot;xxx&quot;;</span><br><span class="line">  let age = 18;</span><br><span class="line">  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">	  name = &#x27;xx&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">	  age += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">	  alert(tel);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以用宏定义<code>defineOptions(&#123;&#125;)</code>来设置组件名称</p>
</blockquote>
<h2 id="2-响应式"><a href="#2-响应式" class="headerlink" title="2. 响应式"></a>2. 响应式</h2><h3 id="1-ref定义基本类型数据"><a href="#1-ref定义基本类型数据" class="headerlink" title="1. ref定义基本类型数据"></a>1. <code>ref</code>定义基本类型数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  defineOptions(&#123; name: &#x27;App&#x27; &#125;);</span><br><span class="line">  let name = ref(&quot;xxx&quot;); // 加ref()让数据变成对象</span><br><span class="line">  let age = ref(18);</span><br><span class="line">  let tel = &#x27;13888888888&#x27;;</span><br><span class="line">  function changeName() &#123;</span><br><span class="line">	  name.value = &#x27;xx&#x27;; // 对value值进行修改</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">	  age.value += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function showTel() &#123;</span><br><span class="line">	  alert(tel);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;  </span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;  </span><br><span class="line">    &lt;p&gt;&#123;&#123;name&#125;&#125;&lt;/p&gt; // vue自动解包，不需要.value  </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-reactive定义对象类型的数据"><a href="#2-reactive定义对象类型的数据" class="headerlink" title="2. reactive定义对象类型的数据"></a>2. <code>reactive</code>定义对象类型的数据</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;reactive&#125; from &#x27;vue&#x27;;</span><br><span class="line">  defineOptions(&#123; name: &#x27;Car&#x27; &#125;);</span><br><span class="line">  let car = reactive(&#123;brand: &#x27;奔驰&#x27;, price: 100&#125;);</span><br><span class="line">  function changePrice() &#123;</span><br><span class="line">    car.price += 10;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;  </span><br><span class="line">  &lt;div class=&quot;car&quot;&gt;  </span><br><span class="line">    &lt;h2&gt;一辆&#123;&#123;car.brand&#125;&#125;车，价值&#123;&#123;car.price&#125;&#125;万&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;修改汽车价格&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>reactive</code>只能定义对象类型响应数据</p>
</blockquote>
<h3 id="3-ref定义对象类型的数据"><a href="#3-ref定义对象类型的数据" class="headerlink" title="3. ref定义对象类型的数据"></a>3. <code>ref</code>定义对象类型的数据</h3><p>略</p>
<h3 id="4-ref对比reactive"><a href="#4-ref对比reactive" class="headerlink" title="4. ref对比reactive"></a>4. <code>ref</code>对比<code>reactive</code></h3><h4 id="1-宏观角度"><a href="#1-宏观角度" class="headerlink" title="1. 宏观角度"></a>1. 宏观角度</h4><ul>
<li><code>ref</code>用来定义：基本类型数据，对象类型数据</li>
<li><code>reactive</code>用来定义：对象类型数据</li>
</ul>
<h4 id="2-区别"><a href="#2-区别" class="headerlink" title="2. 区别"></a>2. 区别</h4><ul>
<li><code>ref</code>创建变量必须使用<code>.value</code>（可以用<code>volar</code>插件自动加<code>.value</code>）</li>
<li><code>reactive</code>重新分配一个新对象，会失去响应式（可以用<code>Object.assign</code>去整体替换）。</li>
</ul>
<h4 id="3-使用原则"><a href="#3-使用原则" class="headerlink" title="3.使用原则"></a>3.使用原则</h4><ol>
<li>若需要一个基本类型的响应式数据，必须用<code>ref</code></li>
<li>若需要一个响应式对象，层级不深，<code>ref</code>和<code>reactive</code>都可以</li>
<li>若需要一个响应式对象，且层级较深，建议使用<code>reactive</code></li>
</ol>
<h3 id="5-toRefs与toRef"><a href="#5-toRefs与toRef" class="headerlink" title="5.toRefs与toRef"></a>5.<code>toRefs</code>与<code>toRef</code></h3><p>新版本直接解构即可，不再会丢失响应性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;reactive, toRefs, toRef&#125; from &#x27;vue&#x27;;</span><br><span class="line">  let person = reactive(&#123;</span><br><span class="line">    name: &quot;xxx&quot;,</span><br><span class="line">    age: 18</span><br><span class="line">  &#125;)</span><br><span class="line">  let &#123;name, age&#125; = toRefs(person) ；</span><br><span class="line">  let n1 = toRef(person,&#x27;age&#x27;)；</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;  </span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;  </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用<code>toRefs</code>对响应式对象<code>person</code>进行解构赋值，确保解构后的<code>name</code>和<code>age</code>仍保持响应性<br>解构后的属性需通过<code>.value</code>访问，与原始响应式对象属性双向绑定</p>
</blockquote>
<h2 id="3-computed"><a href="#3-computed" class="headerlink" title="3. computed()"></a>3. <code>computed()</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, computed&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let lastName = ref(&#x27;张&#x27;);</span><br><span class="line">  let firstName = ref(&#x27;三&#x27;);</span><br><span class="line">  let fullName = computed(() =&gt; &#123;</span><br><span class="line">    return lastName.value.slice(0, 1).toUpperCase() + lastName.value.slice(1) + &#x27;-&#x27; + firstName.value;</span><br><span class="line">  &#125;)</span><br><span class="line">  /*</span><br><span class="line">  let fullName = computed(&#123;</span><br><span class="line">    get() &#123;</span><br><span class="line">      return lastName.value.slice(0, 1).toUpperCase() + lastName.value.slice(1) + &#x27;-&#x27; + firstName.value;</span><br><span class="line">    &#125;,</span><br><span class="line">    set(val) &#123;</span><br><span class="line">      const [str1, str2] = val.split(&#x27;-&#x27;);</span><br><span class="line">      lastName.value = str1;</span><br><span class="line">      firstName.value = str2;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  */</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;  </span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;</span><br><span class="line">    全名: &lt;span&gt;&#123;&#123;lastName&#125;&#125;-&#123;&#123;firstName&#125;&#125;&lt;/span&gt; &lt;br&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>computed</code>会缓存计算结果，只有当其依赖的响应式数据（如<code>ref</code>或<code>reactive</code>变量）发生变化时才会重新计算。<br><code>computed</code>是只读的，使用注释的方法可以实现可读写</p>
</blockquote>
<h2 id="4-watch"><a href="#4-watch" class="headerlink" title="4. watch()"></a>4. <code>watch()</code></h2><ul>
<li>作用：监视数据的变化</li>
<li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<em>四种数据</em>：<ol>
<li><code>ref</code>定义的数据</li>
<li><code>reactive</code>定义的数据</li>
<li>函数返回一个值（<code>getter</code>函数）</li>
<li>一个包含上述的数组</li>
</ol>
</li>
</ul>
<h3 id="情况一"><a href="#情况一" class="headerlink" title="情况一"></a>情况一</h3><p><code>watch</code>监视<code>ref</code>定义的<em>基本类型</em>数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let sum = ref(0);</span><br><span class="line">  </span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value +=1;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  const stopWatch = watch(sum, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;sum is Changed&#x27;, newValue, oldValue)</span><br><span class="line">    if(newValue &gt; 10) &#123;</span><br><span class="line">	  stopWatch();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>watch()</code>函数会返回一个​<strong>​停止监听的函数</strong>，调用该函数可以停止监视<br>第二个参数中的<code>newValue</code>和<code>oldValue</code>指向的是地址</p>
</blockquote>
<h3 id="情况二"><a href="#情况二" class="headerlink" title="情况二"></a>情况二</h3><p><code>watch</code>监视<code>ref</code>定义的<em>对象类型</em>数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let person = &#123;</span><br><span class="line">    name: &#x27;xxx&#x27;,</span><br><span class="line">    age: 18</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.value.name += &#x27;~&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    person.value.age += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson() &#123;</span><br><span class="line">    person.value = &#123;name: &#x27;yyy&#x27;, age: 90&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  watch(person,(newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;person is Changed&#x27;, newValue, oldValue);</span><br><span class="line">  &#125;,&#123;deep: true, immediated: true&#125;) </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">	&lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;改人&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>若按情况一的写法，<code>watch</code>只会监视对象的地址值，而不关心对象属性的变化<br>若想监视内部属性，则需要手动开启深度监视<code>&#123;deep: true&#125;</code><br><code>&#123;immediated: true&#125;</code>可以在开始是调用<code>warch</code>的回调函数，<code>oldValue</code>等于<code>undefined</code></p>
</blockquote>
<h3 id="情况三"><a href="#情况三" class="headerlink" title="情况三"></a>情况三</h3><p><code>watch</code>监视<code>reactive</code>定义的<em>对象类型</em>数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;reactive, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let person = &#123;</span><br><span class="line">    name: &#x27;xxx&#x27;,</span><br><span class="line">    age: 18</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name += &#x27;~&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    person.age += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function changePerson() &#123;</span><br><span class="line">    Object.assign(person, &#123;name: &#x27;yyy&#x27;, age: 90&#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  watch(person, () =&gt; &#123;</span><br><span class="line">    console.log(&#x27;person is Changed&#x27;, newValue, oldValue);</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">	&lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;改人&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>默认开启深度监视，且不可关闭</p>
</blockquote>
<h3 id="情况四"><a href="#情况四" class="headerlink" title="情况四"></a>情况四</h3><p><code>watch</code>监视<code>ref</code>或<code>reactive</code>定义的<em>对象类型</em>数据中的某个属性，注意以下几点：</p>
<ol>
<li>若该属性值不是对象类型，需要改写为函数形式</li>
<li>若该属性值仍是对象类型，可以直接写，但建议也写成函数。否则在该属性整体改变时，​依赖追踪失效​导致监听不触发</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;reactive, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">   let person = reactive(&#123;</span><br><span class="line">     name: &#x27;xxx&#x27;,</span><br><span class="line">     age: 18,</span><br><span class="line">     cars: &#123;</span><br><span class="line">       car1: &#x27;奔驰&#x27;,</span><br><span class="line">       car2: &#x27;宝马&#x27;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name += &#x27;~&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    person.age += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar1() &#123;</span><br><span class="line">    person.cars.car1 = &#x27;小米&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar2() &#123;</span><br><span class="line">    person.cars.car2 = &#x27;理想&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCars() &#123;</span><br><span class="line">    person.cars = &#123;</span><br><span class="line">      car1: &#x27;爱玛&#x27;,</span><br><span class="line">      car2: &#x27;雅迪&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  watch(() =&gt; person.name, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&quot;name is changed&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">  watch(() =&gt; person.cars, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&quot;cars &quot;)</span><br><span class="line">  &#125;,&#123;deep: true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">	&lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123;person.cars.car1&#125;&#125;,&#123;&#123;person.cars.car2&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar1&quot;&gt;改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar2&quot;&gt;改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCars&quot;&gt;改全部车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h3 id="情况五"><a href="#情况五" class="headerlink" title="情况五"></a>情况五</h3><p><code>watch</code>监视上述多个数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;reactive, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">   let person = reactive(&#123;</span><br><span class="line">     name: &#x27;xxx&#x27;,</span><br><span class="line">     age: 18,</span><br><span class="line">     cars: &#123;</span><br><span class="line">       car1: &#x27;奔驰&#x27;,</span><br><span class="line">       car2: &#x27;宝马&#x27;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">  function changeName() &#123;</span><br><span class="line">    person.name += &#x27;~&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeAge() &#123;</span><br><span class="line">    person.age +=&#x27;1&#x27;;   </span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar1() &#123;</span><br><span class="line">    person.cars.car1 = &#x27;小米&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCar2() &#123;</span><br><span class="line">    person.cars.car2 = &#x27;理想&#x27;;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCars() &#123;</span><br><span class="line">    person.cars = &#123;</span><br><span class="line">      car1: &#x27;爱玛&#x27;,</span><br><span class="line">      car2: &#x27;雅迪&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  watch([() =&gt; person.name, () =&gt; person.cars.car1], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&quot;name is changed&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">	&lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123;person.cars.car1&#125;&#125;,&#123;&#123;person.cars.car2&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar1&quot;&gt;改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar2&quot;&gt;改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCars&quot;&gt;改全部车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-watchEffect"><a href="#5-watchEffect" class="headerlink" title="5. watchEffect()"></a>5. <code>watchEffect()</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, watch, watchEffect&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let temp = ref(10);</span><br><span class="line">  let height = ref(0);</span><br><span class="line">  </span><br><span class="line">  function changeTemp() &#123;</span><br><span class="line">    temp.value += 10;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeHeight() &#123;</span><br><span class="line">    height.value += 10;</span><br><span class="line">  &#125;</span><br><span class="line">  // watch 实现</span><br><span class="line">  watch([temp, hejight], (value) =&gt; &#123;</span><br><span class="line">    let [newTemp, Height] = value;</span><br><span class="line">    if(newTemp &gt;= 60 || newHeight &gt;= 80) &#123;</span><br><span class="line">      console.log(&#x27;@@@&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(newTemp, Height);</span><br><span class="line">  &#125;)</span><br><span class="line">  // watchEffect 实现</span><br><span class="line">  watchEffect(() =&gt; &#123;</span><br><span class="line">    if(temp.value &gt;= 60 || height.value &gt;= 80)&#123;</span><br><span class="line">	  console.log(&#x27;@@@&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;当前水温为：&#123;&#123;temp&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;当前水位为：&#123;&#123;height&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeTemp&quot;&gt;temp+10&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeHeight&quot;&gt;height+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>自动追踪回调函数内使用的响应式数据（如 <code>temp.value</code>和 <code>height.value</code>），无需显式声明依赖。初始化时立即执行一次回调，用于捕获初始状态。无法直接获取变化前的值</p>
</blockquote>
<h2 id="6-标签的ref属性"><a href="#6-标签的ref属性" class="headerlink" title="6. 标签的ref属性"></a>6. 标签的<code>ref</code>属性</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let title2 = ref();</span><br><span class="line">  </span><br><span class="line">  function showLog() &#123;</span><br><span class="line">    console.log(title2);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h1&gt;中国&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;青海&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;西宁&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;click me!&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>推荐使用标签的<code>ref</code>属性来获取元素，而不是根据id进行<code>DOM</code>操作。因为<code>ref</code>容器是局部的，而<code>DOM</code>操作容易获取到其他组件的元素。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, defineExpose&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let title2 = ref();</span><br><span class="line">  let a = ref(0);</span><br><span class="line">  let b = ref(1);</span><br><span class="line">  let c = ref(2);</span><br><span class="line">  function showLog() &#123;</span><br><span class="line">    console.log(title2);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  defineExpose(&#123;a, b, c&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h1&gt;中国&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;青海&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;西宁&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;click me!&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>当父组件通过<code>ref</code>属性来获得子组件的元素时，默认是无法获取任何元素的。必须在子组件通过<code>defineExpose()</code>将对象暴露</p>
</blockquote>
<h2 id="7-props"><a href="#7-props" class="headerlink" title="7. props"></a>7. <code>props</code></h2><p>index.ts</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PersonInterface</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Persons</span> = <span class="title class_">PersonInterface</span>[];</span><br></pre></td></tr></table></figure>
<p>App.vue:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Person from &#x27;./components/Person.vue&#x27;;</span><br><span class="line">  import &#123;type Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line">  import &#123;reactive&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let PersonList = reactive&lt;Persons&gt;([</span><br><span class="line">    &#123;id: &#x27;dhfgajsh01&#x27;, name: &#x27;xxx&#x27;, age: 18&#125;,</span><br><span class="line">    &#123;id: &#x27;dhfgajsh02&#x27;, name: &#x27;yyy&#x27;, age: 19&#125;,</span><br><span class="line">    &#123;id: &#x27;dhfgajsh03&#x27;, name: &#x27;zzz&#x27;, age: 17&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person/ :List=&quot;PersonList&quot;&gt;// 把列表传给Person组件</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>Person.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;defineProps&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import &#123;Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line">  </span><br><span class="line">  // 只接收List</span><br><span class="line">  defineProps([&#x27;List&#x27;]); // 必须写成数组的形式</span><br><span class="line">  </span><br><span class="line">  // 接收List + 类型限制</span><br><span class="line">  defineProps&lt;&#123;List: Person&#125;&gt;();</span><br><span class="line">  </span><br><span class="line">  // 接收List + 类型限制 + 限制必要性 + 指定默认值</span><br><span class="line">  const &#123; List = [&#123; name: &#x27;默认姓名&#x27;, age: 18 &#125;] &#125; = defineProps&lt;&#123; List?: Person[] &#125;&gt;();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;persons&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for = &quot;p in List&quot; :key = &quot;p.id&quot;&gt;</span><br><span class="line">        &#123;&#123;p.name&#125;&#125;--&#123;&#123;p.age&#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="8-生命周期"><a href="#8-生命周期" class="headerlink" title="8. 生命周期"></a>8. 生命周期</h2><p>组件的生命周期<br>创建 挂载 更新 销毁</p>
<h3 id="1-Vue2-生命周期"><a href="#1-Vue2-生命周期" class="headerlink" title="1. Vue2 生命周期"></a>1. Vue2 生命周期</h3><table>
<thead>
<tr>
<th>生命周期</th>
<th>钩子</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td><code>beforeCreate()</code>,<code>created()</code></td>
</tr>
<tr>
<td>挂载</td>
<td><code>beforeMount()</code>,<code>mounted()</code></td>
</tr>
<tr>
<td>更新</td>
<td><code>beforeUpdate</code>,<code>updated()</code></td>
</tr>
<tr>
<td>销毁</td>
<td><code>beforeDestroy()</code>,<code>destroyed()</code></td>
</tr>
</tbody></table>
<h3 id="2-Vue3-生命周期"><a href="#2-Vue3-生命周期" class="headerlink" title="2. Vue3 生命周期"></a>2. Vue3 生命周期</h3><table>
<thead>
<tr>
<th>生命周期</th>
<th>钩子</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>在setup函数中便是创建阶段</td>
</tr>
<tr>
<td>挂载</td>
<td><code>onBeforeMount()</code>,<code>onMounted()</code></td>
</tr>
<tr>
<td>更新</td>
<td><code>onBeforeUpdate</code>,<code>onUpdated()</code></td>
</tr>
<tr>
<td>销毁</td>
<td><code>onBeforeUnmount()</code>,<code>onUnmounted()</code></td>
</tr>
</tbody></table>
<h2 id="9-Hooks"><a href="#9-Hooks" class="headerlink" title="9. Hooks"></a>9. <code>Hooks</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let sum = ref(0);</span><br><span class="line">  let count = ref(1);</span><br><span class="line">  </span><br><span class="line">  function changeSum() &#123;</span><br><span class="line">    sum.value += 10;</span><br><span class="line">  &#125;</span><br><span class="line">  function changeCount() &#123;</span><br><span class="line">    count.value += 1;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;求和：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;sum+10&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>通过<code>Hooks</code>将上述组件脚本中的不同功能的数据和函数封装</p>
<ul>
<li><code>useSum.ts</code>:  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">changeSum</span>(<span class="params"></span>) &#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;sum, changeSum&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>useCount.ts</code>:	  <figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;ref&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">let</span> count = <span class="title function_">ref</span>(<span class="number">1</span>);</span><br><span class="line">   </span><br><span class="line">     <span class="keyword">function</span> <span class="title function_">changeCount</span>(<span class="params"></span>) &#123;</span><br><span class="line">       count.<span class="property">value</span> += <span class="number">1</span>;</span><br><span class="line">     &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> &#123;count, changeCount&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><code>Math.vue</code>:  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import useSum from &#x27;@/hooks/useSum&#x27;;</span><br><span class="line">  import useCount from &#x27;@/hooks/useCount&#x27;;</span><br><span class="line">  </span><br><span class="line">  const &#123;sum, changeSum&#125; = useSum();</span><br><span class="line">  const &#123;count, changeCount&#125; = useCount();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;求和：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;sum+10&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="四、路由"><a href="#四、路由" class="headerlink" title="四、路由"></a>四、路由</h1><h2 id="1-安装路由器组件"><a href="#1-安装路由器组件" class="headerlink" title="1. 安装路由器组件"></a>1. 安装路由器组件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router</span><br></pre></td></tr></table></figure>
<h2 id="2-基本切换效果"><a href="#2-基本切换效果" class="headerlink" title="2. 基本切换效果"></a>2. 基本切换效果</h2><p><code>src/App.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;About&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;Home&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;News&lt;/RouterLink &gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/About.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;about&quot;&gt;</span><br><span class="line">    &lt;p&gt;这是一个测试组件&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/Home.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home&quot;&gt;</span><br><span class="line">    &lt;p&gt;主页&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/News.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;news 1&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;news 2&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;news 3&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/router/index.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/viewsviews/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/viewsviews/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/viewsviews/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> reouter</span><br></pre></td></tr></table></figure>
<p><code>src/main.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line">app.<span class="title function_">use</span>(router);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3. 注意事项"></a>3. 注意事项</h2><ol>
<li>路由组件一般放在<code>pages</code>或<code>views</code>文件夹，一般组件放在<code>components</code>文件夹。</li>
<li>通过点击导航，视觉效果消失了的路由组件，默认是被卸载的，需要时会重新挂载</li>
</ol>
<h2 id="4-路由器工作模式"><a href="#4-路由器工作模式" class="headerlink" title="4. 路由器工作模式"></a>4. 路由器工作模式</h2><ol>
<li><code>history</code>模式<blockquote>
<p>优点：<code>URL</code>更加美观，不带<code>#</code>，更接近传统网站<code>URL</code>。<br>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会用<code>404</code>错误。</p>
</blockquote>
</li>
<li><code>hash</code>模式<blockquote>
<p>优点：兼容性更好，因为不需要服务端处理路径。<br>缺点：<code>URL</code>带<code>#</code>不太美观，而且在<code>SEO</code>优化方面相对较差。</p>
</blockquote>
</li>
</ol>
<h2 id="5-to的两种写法"><a href="#5-to的两种写法" class="headerlink" title="5. to的两种写法"></a>5. <code>to</code>的两种写法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;About&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink :to=&quot;&#123;path: &#x27;/home&#x27;&#125;&quot; active-class=&quot;active&quot;&gt;Home&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink :to=&quot;&#123;name: &#x27;关于&#x27;&#125;&quot; active-class=&quot;active&quot;&gt;News&lt;/RouterLink &gt;</span><br><span class="line">      // 下面会讲到命名路由</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="6-命名路由"><a href="#6-命名路由" class="headerlink" title="6. 命名路由"></a>6. 命名路由</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;关于&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<h2 id="7-嵌套路由"><a href="#7-嵌套路由" class="headerlink" title="7. 嵌套路由"></a>7. 嵌套路由</h2><p><code>src/views/News.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;react&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const newsList = reactive([</span><br><span class="line">    &#123;id: &#x27;asda001&#x27;, title:&#x27;如何学好前端&#x27;, content:&#x27;菜就多练&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda002&#x27;, title:&#x27;最好的语言&#x27;, content:&#x27;PHP&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda003&#x27;, title:&#x27;国庆假期该干什么&#x27;, content:&#x27;睡觉&#x27;&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;&lt;RouterLink to=&quot;/news/detail&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;news-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/Detail.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;news-list&quot;&gt;</span><br><span class="line">    &lt;li&gt;编号：xxx&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：xxx&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：xxx&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/router/index.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Detail.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;关于&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>, <span class="comment">// 子路径无前导斜杠</span></span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<h2 id="8-query参数"><a href="#8-query参数" class="headerlink" title="8. query参数"></a>8. <code>query</code>参数</h2><p><code>src/views/Detail.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;getRoute&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const route = uesRoute();</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;news-list&quot;&gt;</span><br><span class="line">    &lt;li&gt;编号：&#123;&#123; route.query.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：&#123;&#123; route.query.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：&#123;&#123; route.query.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/News.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;react&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const newsList = reactive([</span><br><span class="line">    &#123;id: &#x27;asda001&#x27;, title:&#x27;如何学好前端&#x27;, content:&#x27;菜就多练&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda002&#x27;, title:&#x27;最好的语言&#x27;, content:&#x27;PHP&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda003&#x27;, title:&#x27;国庆假期该干什么&#x27;, content:&#x27;睡觉&#x27;&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;!-- 第一种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;&lt;RouterLink :to=&quot;`/news/detail?$id=&#123;news.id&#125;&amp;title=$&#123;news.title&#125;&amp;content=$&#123;news.content&#125;`&quot;&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">      &lt;!-- 第二种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;</span><br><span class="line">        &lt;RouterLink </span><br><span class="line">          :to=&quot;&#123;</span><br><span class="line">            path: &#x27;/news/detail&#x27;,</span><br><span class="line">            query:&#123;</span><br><span class="line">              id: news.id,</span><br><span class="line">              titile: news.title,</span><br><span class="line">              content: news.content</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; news.title &#125;&#125;</span><br><span class="line">        &lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;news-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="9-params参数"><a href="#9-params参数" class="headerlink" title="9. params参数"></a>9. <code>params</code>参数</h2><p><code>src/views/Detail.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;useRoute&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const route = uesRoute();</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;news-list&quot;&gt;</span><br><span class="line">    &lt;li&gt;编号：&#123;&#123; route.parmas.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：&#123;&#123; route.parmas.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：&#123;&#123; route.parmas.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/News.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;react&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const newsList = reactive([</span><br><span class="line">    &#123;id: &#x27;asda001&#x27;, title:&#x27;如何学好前端&#x27;, content:&#x27;菜就多练&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda002&#x27;, title:&#x27;最好的语言&#x27;, content:&#x27;PHP&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda003&#x27;, title:&#x27;国庆假期该干什么&#x27;, content:&#x27;睡觉&#x27;&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;!-- 第一种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;&lt;RouterLink :to=`&quot;/news/detail/$&#123;new.id&#125;/$&#123;news.title&#125;/$&#123;news.content&#125;&quot;`&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">      &lt;!-- 第二种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;</span><br><span class="line">        &lt;RouterLink </span><br><span class="line">          :to=&quot;&#123;</span><br><span class="line">            name: &#x27;详情&#x27;, </span><br><span class="line">            query:&#123;</span><br><span class="line">              id: news.id,</span><br><span class="line">              titile: news.title,</span><br><span class="line">              content: news.content</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; news.title &#125;&#125;</span><br><span class="line">        &lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;news-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/router/index.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Detail.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;关于&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title/:content?&#x27;</span>, <span class="comment">// 需用占位符占位,问号表示可传可不传</span></span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>传递<code>params</code>参数时，必须在路由规则里提前占位<br>传递<code>params</code>参数时，<code>to</code>对象写法传参必须用<code>name</code>，不能用<code>path</code></p>
</blockquote>
<h2 id="10-props配置"><a href="#10-props配置" class="headerlink" title="10. props配置"></a>10. <code>props</code>配置</h2><p><code>src/views/Detail.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  </span><br><span class="line">  defineProps([&#x27;id&#x27;, &#x27;title&#x27;, &#x27;content&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class=&quot;news-list&quot;&gt;</span><br><span class="line">    &lt;li&gt;编号：&#123;&#123; id &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：&#123;&#123; title &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：&#123;&#123; content &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/views/News.vue</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;react&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const newsList = reactive([</span><br><span class="line">    &#123;id: &#x27;asda001&#x27;, title:&#x27;如何学好前端&#x27;, content:&#x27;菜就多练&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda002&#x27;, title:&#x27;最好的语言&#x27;, content:&#x27;PHP&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;asda003&#x27;, title:&#x27;国庆假期该干什么&#x27;, content:&#x27;睡觉&#x27;&#125;</span><br><span class="line">  ])</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;!-- 第一种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;&lt;RouterLink :to=`&quot;/news/detail/$&#123;new.id&#125;/$&#123;news.title&#125;/$&#123;news.content&#125;&quot;`&gt;&#123;&#123; news.title &#125;&#125;&lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">      &lt;!-- 第二种写法 --&gt;</span><br><span class="line">      &lt;li v-for=&quot;news in newsList&quot;, key=&quot;news.id&quot;&gt;</span><br><span class="line">        &lt;RouterLink </span><br><span class="line">          :to=&quot;&#123;</span><br><span class="line">            name: &#x27;详情&#x27;, </span><br><span class="line">            query:&#123;</span><br><span class="line">              id: news.id,</span><br><span class="line">              titile: news.title,</span><br><span class="line">              content: news.content</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;&quot;</span><br><span class="line">        &gt;</span><br><span class="line">          &#123;&#123; news.title &#125;&#125;</span><br><span class="line">        &lt;/RouterLink&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;div class=&quot;news-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/router/index.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Detail.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;关于&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title/:content?&#x27;</span>, <span class="comment">// 需用占位符占位,问号表示可传可不传</span></span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">          <span class="comment">// 第一种方法：将路由收到的pramas参数作为props传给路由组件</span></span><br><span class="line">          <span class="attr">props</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="comment">// 第二种方法：函数写法，自由决定将什么参数作为props传给路由组件</span></span><br><span class="line">          <span class="title function_">props</span>(<span class="params">route</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> reoute.<span class="property">query</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">// 第三种方法：对象写法，自由决定将什么参数作为props传给路由组件(写死的，应用场景少)</span></span><br><span class="line">          <span class="attr">props</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">100</span>,</span><br><span class="line">            <span class="attr">b</span>: <span class="number">200</span>,</span><br><span class="line">            <span class="attr">c</span>: <span class="number">300</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<h2 id="10-replace属性"><a href="#10-replace属性" class="headerlink" title="10. replace属性"></a>10. <code>replace</code>属性</h2><p><code>src/App.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;RouterView, RouterLink&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink replace to=&quot;/about&quot; active-class=&quot;active&quot;&gt;About&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;Home&lt;/RouterLink &gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;News&lt;/RouterLink &gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>加上<code>replace</code>属性后，跳转后不再可以使用浏览器的回退回退上一页。默认情况是<code>push</code>模式</p>
</blockquote>
<h2 id="10-编程式路由导航"><a href="#10-编程式路由导航" class="headerlink" title="10. 编程式路由导航"></a>10. 编程式路由导航</h2><p><code>src/views/Home.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;onMounted&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import &#123;useRouter&#125; from &#x27;vue-router&#x27;;</span><br><span class="line">  </span><br><span class="line">  const router = useRouter();</span><br><span class="line">  </span><br><span class="line">  onMounted(() =&gt; &#123;</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      router.push(&#x27;/news&#x27;)</span><br><span class="line">    &#125;,3000);</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;home&quot;&gt;</span><br><span class="line">    &lt;p&gt;主页&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>push()</code>传参方式和<code>&lt;RouterLink&gt;</code>的<code>to</code>属性相同。</p>
</blockquote>
<h2 id="11-重定向"><a href="#11-重定向" class="headerlink" title="11. 重定向"></a>11. 重定向</h2><p><code>src/router/index.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createRouter, createWebHistory&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/About.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/News.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Detail</span> <span class="keyword">from</span> <span class="string">&#x27;@/views/Detail.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>:[&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;主页&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">Home</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;关于&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">About</span>,</span><br><span class="line">      <span class="attr">children</span>: [&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;详情&#x27;</span>,</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title/:content?&#x27;</span>, <span class="comment">// 需用占位符占位,问号表示可传可不传</span></span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;新闻&#x27;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/news&#x27;</span>,</span><br><span class="line">      <span class="attr">conponent</span>: <span class="title class_">News</span> </span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>将<code>path</code>路径重定向到<code>redirect</code>路径</p>
</blockquote>
<h1 id="五、pinia"><a href="#五、pinia" class="headerlink" title="五、pinia"></a>五、pinia</h1><h2 id="1-搭建pinia环境"><a href="#1-搭建pinia环境" class="headerlink" title="1. 搭建pinia环境"></a>1. 搭建pinia环境</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pinia</span><br></pre></td></tr></table></figure>
<p><code>src/main.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;createApp&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 引入pinia</span></span><br><span class="line"><span class="keyword">import</span> &#123;creatPinia&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建pinia</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line"><span class="comment">// 安装pinia</span></span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="2-存储读取数据"><a href="#2-存储读取数据" class="headerlink" title="2. 存储读取数据"></a>2. 存储读取数据</h2><p><code>src/store/Count.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">6</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>src/components/Count.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  import &#123;useCountStore&#125; from &#x27;@/store/Count&#x27;;</span><br><span class="line">  </span><br><span class="line">  const countStore = useCountStore();</span><br><span class="line">  </span><br><span class="line">  function changeCount() &#123;</span><br><span class="line">    countStore.count += 1;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; countStore.count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;countStore.count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-修改数据"><a href="#3-修改数据" class="headerlink" title="3. 修改数据"></a>3. 修改数据</h2><p><code>src/components/Count.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  import &#123;useCountStore&#125; from &#x27;@/store/Count&#x27;;</span><br><span class="line">  </span><br><span class="line">  const countStore = useCountStore();</span><br><span class="line">  </span><br><span class="line">  function changeCount() &#123;</span><br><span class="line">    // 第一种方式</span><br><span class="line">    countStore.count += 1; </span><br><span class="line">    // 第二种方式</span><br><span class="line">    countStore.$patch(&#123;</span><br><span class="line">      count += 1</span><br><span class="line">    &#125;);</span><br><span class="line">    // 第三种方式</span><br><span class="line">    countStore.add(10 );</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; countStore.count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;countStore.count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/store/Count.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">value</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span> += value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">6</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>直接修改​</strong>​：直接操作状态属性每次修改都会触发独立的响应式更新，在 DevTools 中会产生多条记录<br><strong><code>$patch</code>批量修改​</strong>​：将多个修改合并为一次响应式更新，在 DevTools 中只显示一条记录，减少响应式触发次数，适合性能优化<br><strong>Action 修改​</strong>​：在 Store 中定义 <code>actions</code>方法，支持参数传递、异步操作和复杂业务逻辑，提高代码复用性和可维护性</p>
</blockquote>
<h2 id="4-storeToRefs"><a href="#4-storeToRefs" class="headerlink" title="4. storeToRefs()"></a>4. <code>storeToRefs()</code></h2><p><code>src/components/Count.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import &#123;useCountStore&#125; from &#x27;@/store/Count&#x27;;</span><br><span class="line">  import &#123;storeToRefs&#125; from &#x27;pinia&#x27;;</span><br><span class="line">  </span><br><span class="line">  const countStore = useCountStore();</span><br><span class="line">  </span><br><span class="line">  const &#123;count&#125; = storeToRefs(countStore);</span><br><span class="line">  </span><br><span class="line">  function changeCount() &#123;</span><br><span class="line">    countStore.$patch(&#123;</span><br><span class="line">      count += 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对 Pinia Store 进行解构赋值时，若直接使用 <code>toRefs()</code>会将所有属性（包括方法）强制转换为响应式引用，造成不必要的性能开销。推荐使用 <code>storeToRefs()</code>，它仅针对 state 和 getters 生成响应式引用，避免对 actions 等非状态数据做无效处理，从而优化性能。</p>
</blockquote>
<h2 id="5-getters"><a href="#5-getters" class="headerlink" title="5. getters"></a>5. <code>getters</code></h2><p><code>src/store/Count.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params">value</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">count</span> += value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">6</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>:&#123;</span><br><span class="line">    <span class="title function_">bigCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> * <span class="number">10</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">smallCount</span>(<span class="params">state</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">count</span> / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="6-subscribe"><a href="#6-subscribe" class="headerlink" title="6. &#96;$subscribe()"></a>6. &#96;$subscribe()</h2><p><code>src/components/Count.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import &#123;useCountStore&#125; from &#x27;@/store/Count&#x27;;</span><br><span class="line">  import &#123;storeToRefs&#125; from &#x27;pinia&#x27;;</span><br><span class="line">  </span><br><span class="line">  const countStore = useCountStore();</span><br><span class="line">  </span><br><span class="line">  const &#123;count&#125; = storeToRefs(countStore);</span><br><span class="line">  </span><br><span class="line">  countStore.$subscribe((mutate, state) =&gt; &#123;</span><br><span class="line">    console.log(countStore中数据发生了变化);</span><br><span class="line">    localStorage.setItem(&#x27;count&#x27;,JSON.stringify(state.count)); // 当值发生变化后，将新数据存入浏览器缓存</span><br><span class="line">  &#125;)</span><br><span class="line">  function changeCount() &#123;</span><br><span class="line">    countStore.$patch(&#123;</span><br><span class="line">      count += 1</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;water&quot;&gt;</span><br><span class="line">    &lt;h2&gt;计数：&#123;&#123; count &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCount&quot;&gt;count+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">````</span><br><span class="line">`src/store/Count.ts`:</span><br><span class="line">```typescript</span><br><span class="line">import &#123;defineStore&#125; from &#x27;pinia&#x27;;</span><br><span class="line"></span><br><span class="line">export const useCountStore = defineStore(&#x27;count&#x27;, &#123;</span><br><span class="line">  actions: &#123;</span><br><span class="line">    add(value)&#123;</span><br><span class="line">      this.count += value;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  state() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: JSON.parse(localStorage.getItem(&#x27;count&#x27;) as string) || []; // count的值优先从用户的浏览器缓存中获取</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters:&#123;</span><br><span class="line">    bigCount(state)&#123;</span><br><span class="line">      return state.count * 10;</span><br><span class="line">    &#125;,</span><br><span class="line">    smallCount(state)&#123;</span><br><span class="line">      return state.count / 10;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>通过订阅可以实现网页刷新数据不丢失</p>
</blockquote>
<h2 id="7-store的组合式写法"><a href="#7-store的组合式写法" class="headerlink" title="7. store的组合式写法"></a>7. store的组合式写法</h2><p><code>src/store/Count.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineStore&#125; <span class="keyword">from</span> <span class="string">&#x27;pinia&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;reactive&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&#x27;count&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;count&#x27;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  )</span><br><span class="line">  <span class="title function_">add</span>(<span class="params">value</span>)&#123;</span><br><span class="line">      count += value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;count, add&#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="六、组件通信"><a href="#六、组件通信" class="headerlink" title="六、组件通信"></a>六、组件通信</h1><h2 id="1-props"><a href="#1-props" class="headerlink" title="1. props"></a>1. <code>props</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let car = ref(&#x27;宝马&#x27;);</span><br><span class="line">  let toy = ref(&#x27;&#x27;);</span><br><span class="line">  </span><br><span class="line">  function getToy(value:string)&#123;</span><br><span class="line">    toy.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;孩子的玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;Child :car=&quot;car&quot; :sendToy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let toy = ref(&#x27;乐高&#x27;);</span><br><span class="line">  </span><br><span class="line">  defineProps([&#x27;car&#x27;,&#x27;sendToy&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;礼物：&#123;&#123; car &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;sendToy(toy)&quot;&gt;把玩具给父亲&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>父组件在创建子组件时，直接在子标签中加属性即可将参数传给子组件，子组件只需用<code>defineProps()</code>方法接收父组件给的参数即可。<br>子组件给父组件传参数，则需要父组件将一函数传给子组件，子组件通过该函数的传参将参数传给父组件。</p>
</blockquote>
<h2 id="2-自定义事件"><a href="#2-自定义事件" class="headerlink" title="2. 自定义事件"></a>2. 自定义事件</h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  let toy = ref(&#x27;&#x27;);</span><br><span class="line">  </span><br><span class="line">  function getToy(value: string) &#123;</span><br><span class="line">    toy.value = value;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;孩子的玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;Child @send-toy=&quot;getToy&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  let toy = ref(&#x27;乐高&#x27;);</span><br><span class="line">  </span><br><span class="line">  const emit = defineEmits([&#x27;sendToy&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;emit(&#x27;send-toy&#x27;,toy)&quot;&gt;把玩具给父亲&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="3-mitt"><a href="#3-mitt" class="headerlink" title="3. mitt"></a>3. <code>mitt</code></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure>
<p><code>src/utils/emitter.ts</code>:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 暴露</span></span><br><span class="line"><span class="keyword">export</span> defalut emitter;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child1.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import emitter from &#x27;@/utils/emitter&#x27;;</span><br><span class="line"></span><br><span class="line">  let toy = ref(&#x27;乐高&#x27;);</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子1组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;button @click=&quot;emitter.emit(&#x27;sef-toy&#x27;,toy)&quot;&gt;把玩具给弟弟&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child2.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref, onUnmounted&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import emitter from &#x27;@/utils/emitter&#x27;;</span><br><span class="line">  </span><br><span class="line">  let computer = ref(&#x27;联想&#x27;);</span><br><span class="line">  let toy = ref(&#x27;&#x27;);</span><br><span class="line">  </span><br><span class="line">  emitter.on(&#x27;send-toy&#x27;,(value) =&gt; &#123;</span><br><span class="line">    toy.value = value;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  onUnmounted(() =&gt; &#123;</span><br><span class="line">    emitter.off(&#x27;send-toy&#x27;); // 在该组件卸载时，解绑事件 </span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子2组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;电脑：&#123;&#123; computer &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-v-model"><a href="#4-v-model" class="headerlink" title="4. v-model"></a>4. <code>v-model</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import ming</span><br><span class="line">  let username = ref(&#x27;zhangsan&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;!-- v-model用在HTML标签，以下两种写法等效 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;username&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; :value=&quot;username&quot; @input=&quot;username = (&lt;HTMLInputElement&gt;$event.target).value&quot;&gt;</span><br><span class="line">    &lt;!-- v-model用在组件标签，以下两种写法等效 --&gt;</span><br><span class="line">    &lt;MingInput v-model=&quot;username&quot;/&gt;</span><br><span class="line">    &lt;MingInput :modeValue=&quot;username&quot; @update:modeValue=&quot;username = $event&quot;/&gt;</span><br><span class="line">    &lt;!-- modeValue值是可以自定义的 --&gt;</span><br><span class="line">    &lt;MingInput v-model:xxx=&quot;username&quot;/&gt;</span><br><span class="line">    &lt;MingInput :xxx=&quot;username&quot; @update:xxx=&quot;username = $event&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/MingInput.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let username = ref(&#x27;zhangsan&#x27;);</span><br><span class="line">  </span><br><span class="line">  defineProps([&#x27;modeValue&#x27;]);</span><br><span class="line">  const emit = defineProps([&#x27;update:modeValue&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; :value=&quot;modelValue&quot; @input=&quot;emit(&#x27;update:modeValue&#x27;,(&lt;HTMLInputElement&gt;$event.target).value)&quot;&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="5-attrs"><a href="#5-attrs" class="headerlink" title="5. $attrs"></a>5. <code>$attrs</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let a = ref(1);</span><br><span class="line">  let b = ref(2);</span><br><span class="line">  let c = ref(3);</span><br><span class="line">  let d = ref(4);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;h4&gt;a:&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;b:&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;c:&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;d:&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x: 100, y: 200&#125;&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import GrandChild from &#x27;./GrandChild.vue&#x27;;</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/GrandChild.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let toy = ref(&#x27;乐高&#x27;);</span><br><span class="line">  </span><br><span class="line">  defineProps([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;x&#x27;, &#x27;y&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grandChild&quot;&gt;</span><br><span class="line">    &lt;h2&gt;孙组件&lt;/h2&gt;</span><br><span class="line">    &lt;h4&gt;a:&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;b:&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;c:&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;d:&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;x:&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;y:&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>父组件给子组件传的参数，若没有被<code>defineProps()</code>接收，将会以一个对象的形式保存在<code>attrs</code>里,通过<code>$attrs</code>调用该对象。</p>
</blockquote>
<h2 id="6-refs与-parent"><a href="#6-refs与-parent" class="headerlink" title="6. $refs与$parent"></a>6. <code>$refs</code>与<code>$parent</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Child1 from &#x27;./Child1.vue&#x27;;</span><br><span class="line">  import Child2 from &#x27;./Child2.vue&#x27;;</span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let house = ref(6);</span><br><span class="line">  </span><br><span class="line">  defineExpose(&#123;&#x27;house&#x27;&#125;);</span><br><span class="line">  </span><br><span class="line">  function giveBookAllChild(refs: &#123;[key: string]: any&#125;)&#123;</span><br><span class="line">    for(let key in refs)&#123;</span><br><span class="line">      refs[key].book += 3;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;房产：&#123;&#123; house &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Child1 ref=&#x27;c1&#x27;/&gt;</span><br><span class="line">    &lt;Child2 ref=&#x27;c2&#x27;/&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;button @click=&quot;giveBookAllChild($refs)&quot;&gt;给全部孩子买书&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child1.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let computer = ref(&#x27;华为&#x27;);</span><br><span class="line">  let book = ref(4);</span><br><span class="line">  </span><br><span class="line">  defineExpose(&#123;&#x27;computer&#x27;, &#x27;book&#x27;&#125;);</span><br><span class="line">  </span><br><span class="line">  function minusHouse(parent: &#123;[key: string]: any&#125;) &#123;</span><br><span class="line">    parent.house -= 1;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child1&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;电脑：&#123;&#123; computer &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;书：&#123;&#123; book &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;button @click=&quot;minusHouse($parent)&quot;&gt;卖掉父亲一套房产&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child2.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let toy = ref(&#x27;乐高&#x27;);</span><br><span class="line">  let book = ref(4);</span><br><span class="line">  </span><br><span class="line">  defineExpose(&#123;&#x27;toy&#x27;, &#x27;book&#x27;&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child2&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;h3&gt;玩具：&#123;&#123; toy &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;h3&gt;书：&#123;&#123; book &#125;&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>$refs</code>包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例<br><code>$parent</code>当前组件的父组件实例对象</p>
</blockquote>
<h2 id="7-provide与inject"><a href="#7-provide与inject" class="headerlink" title="7. provide与inject"></a>7. <code>provide</code>与<code>inject</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;;</span><br><span class="line">  import &#123;ref,reactive,provide&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let car = rective(&#123;</span><br><span class="line">    brand: &#x27;宝马&#x27;,</span><br><span class="line">    price: 100</span><br><span class="line">  &#125;);</span><br><span class="line">  let money = ref(100);</span><br><span class="line">  </span><br><span class="line">  function moneyContext(value: number) &#123;</span><br><span class="line">    money.value += value;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 向后代提供数据</span><br><span class="line">  provide(&#x27;money&#x27;,&#123;money, moneyContext&#125;);</span><br><span class="line">  provide(&#x27;car&#x27;,car);</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件&lt;/h2&gt;</span><br><span class="line">    &lt;h4&gt;车:&#123;&#123; car.brand &#125;&#125;，价格:&#123;&#123; car.moeny &#125;&#125;w&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;钱:&#123;&#123; money &#125;&#125;w&lt;/h4&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Child.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import GrandChild from &#x27;./GrandChild.vue&#x27;;</span><br><span class="line">  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h2&gt;子组件&lt;/h2&gt;</span><br><span class="line">    &lt;GrandChild/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/GrandChild.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;inject&#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let &#123;money, updateMoney&#125; = inject(&#x27;money&#x27;, &#123;money: 0,updateMoney: (x: number) =&gt; &#123;&#125;&#125;);</span><br><span class="line">  let car = inject(&#x27;car&#x27;,&#123;brand: &#x27;unkown&#x27;, price: 0&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grandChild&quot;&gt;</span><br><span class="line">    &lt;h2&gt;孙组件&lt;/h2&gt;</span><br><span class="line">    &lt;h4&gt;车:&#123;&#123; car.brand &#125;&#125;，价格:&#123;&#123; car.moeny &#125;&#125;w&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;钱:&#123;&#123; money &#125;&#125;w&lt;/h4&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;button @click=&quot;updateMoney(10)&quot;&gt;修改money&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h2 id="8-插槽"><a href="#8-插槽" class="headerlink" title="8. 插槽"></a>8. 插槽</h2><h3 id="1-默认插槽"><a href="#1-默认插槽" class="headerlink" title="1. 默认插槽"></a>1. 默认插槽</h3><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Category from &#x27;./Category.vue&#x27;;</span><br><span class="line">  import &#123; ref, reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let games = reactive([</span><br><span class="line">    &#123;id: &#x27;adfasdfasd01&#x27;, name: &#x27;我的世界&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd02&#x27;, name: &#x27;王者荣耀&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd03&#x27;, name: &#x27;英雄联盟&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd04&#x27;, name: &#x27;绝地求生&#x27;&#125;</span><br><span class="line">  ]);</span><br><span class="line">  let imgUrl = ref(&#x27;http:// /&#x27;);</span><br><span class="line">  let videoUrl = ref(&#x27;http:// /&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;Category title=&quot;热门游戏列表&quot;&gt;</span><br><span class="line">	  &lt;ul&gt;</span><br><span class="line">	    &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">	  &lt;/ul&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Category title=&quot;今日美食城市&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Category title=&quot;今日影视推荐&quot;&gt;</span><br><span class="line">      &lt;video :src=&quot;videoUrl&quot;&gt;&lt;/video controls&gt;</span><br><span class="line">	&lt;/Category&gt;    </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Category.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  defineProps([&#x27;title&#x27;]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;slot&gt; 默认内容 &lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在子组件中使用 <code>&lt;slot&gt;&lt;/slot&gt;</code>定义​<strong>​内容分发出口​</strong>​，父组件调用时可在子组件标签内部插入任意模板内容（如 HTML、动态数据、其他组件），这些内容将自动替换子组件中的 <code>&lt;slot&gt;</code>位置。若父组件未提供内容，则显示 <code>&lt;slot&gt;</code>标签内的默认内容</p>
</blockquote>
<h3 id="2-具名插槽"><a href="#2-具名插槽" class="headerlink" title="2. 具名插槽"></a>2. 具名插槽</h3><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import Category from &#x27;./Category.vue&#x27;;</span><br><span class="line">  import &#123; ref, reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let games = reactive([</span><br><span class="line">    &#123;id: &#x27;adfasdfasd01&#x27;, name: &#x27;我的世界&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd02&#x27;, name: &#x27;王者荣耀&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd03&#x27;, name: &#x27;英雄联盟&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd04&#x27;, name: &#x27;绝地求生&#x27;&#125;</span><br><span class="line">  ]);</span><br><span class="line">  let imgUrl = ref(&#x27;http:// /&#x27;);</span><br><span class="line">  let videoUrl = ref(&#x27;http:// /&#x27;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">  </span><br><span class="line">    &lt;Category&gt;</span><br><span class="line">      &lt;template v-slot:s1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:s2&gt;</span><br><span class="line">	    &lt;ul&gt;</span><br><span class="line">	      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">	    &lt;/ul&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Category&gt;</span><br><span class="line">      &lt;template v-slot:s1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:s2&gt;</span><br><span class="line">        &lt;img :src=&quot;imgUrl&quot; alt=&quot;&quot;&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Category&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Category&gt;</span><br><span class="line">      &lt;template #s1&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #s2&gt;</span><br><span class="line">        &lt;video :src=&quot;videoUrl&quot;&gt;&lt;/video controls&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">	&lt;/Category&gt;</span><br><span class="line">	</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Category.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;slot name=&quot;s1&quot;&gt; 默认内容1 &lt;/slot&gt;</span><br><span class="line">    &lt;slot name=&quot;s2&quot;&gt; 默认内容2 &lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在子组件中通过 <code>&lt;slot name=&quot;xxx&quot;&gt;</code>定义​<strong>​多个命名分发出口​</strong>​，父组件调用时需通过 <code>&lt;template #xxx&gt;</code>或 <code>&lt;template v-slot:xxx&gt;</code>将内容精准插入对应名称的插槽位置。</p>
</blockquote>
<h3 id="3-作用域插槽"><a href="#3-作用域插槽" class="headerlink" title="3. 作用域插槽"></a>3. 作用域插槽</h3><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import game from &#x27;./Game.vue&#x27;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">      &lt;Game&gt;</span><br><span class="line">        &lt;template v-slot=&quot;params&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">	        &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">	      &lt;/ul&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line">      &lt;Game&gt;</span><br><span class="line">        &lt;template v-slot=&quot;params&quot;&gt;</span><br><span class="line">          &lt;ol&gt;</span><br><span class="line">	        &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">	      &lt;/ol&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line">      &lt;Game&gt;</span><br><span class="line">        &lt;template v-slot=&quot;&#123;games&#125;&quot;&gt;</span><br><span class="line">          &lt;h3 v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/h3&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/Game.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">  </span><br><span class="line">  let games = reactive([</span><br><span class="line">    &#123;id: &#x27;adfasdfasd01&#x27;, name: &#x27;我的世界&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd02&#x27;, name: &#x27;王者荣耀&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd03&#x27;, name: &#x27;英雄联盟&#x27;&#125;,</span><br><span class="line">    &#123;id: &#x27;adfasdfasd04&#x27;, name: &#x27;绝地求生&#x27;&#125;</span><br><span class="line">  ]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;game&quot;&gt;</span><br><span class="line">    &lt;slot :games=&quot;games&quot; :x=&quot;text&quot; :y=&quot;text&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>子组件​通过 <code>&lt;slot&gt;</code>的 <code>v-bind</code>绑定数据（如 <code>:games=&quot;games&quot;</code>），将内部数据暴露给父组件。<br>​父组件​​通过 <code>v-slot</code>接收子组件传递的数据（如 <code>params</code>或解构 <code>&#123; games &#125;</code>），并自定义渲染逻辑。</p>
</blockquote>
<h1 id="七、其他API"><a href="#七、其他API" class="headerlink" title="七、其他API"></a>七、其他API</h1><h2 id="1-shallowRef与shallowReactive"><a href="#1-shallowRef与shallowReactive" class="headerlink" title="1. shallowRef与shallowReactive"></a>1. <code>shallowRef</code>与<code>shallowReactive</code></h2><p>​</p>
<table>
<thead>
<tr>
<th>API</th>
<th>响应式层级</th>
<th>典型场景</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td><code>shallowRef</code></td>
<td>仅 <code>.value</code>层</td>
<td>DOM 元素引用、大型对象性能优化</td>
<td><code>const domRef = shallowRef(null)</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>shallowReactive</code></td>
<td>仅对象顶层属性</td>
<td>表单字段（仅需监听字段增减，无需深度响应）</td>
<td><code>const form = shallowReactive(&#123; fields: &#123;&#125; &#125;)</code></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>​性能优化​</strong>​：避免深度递归转换嵌套属性，减少内存和计算开销。<br>​<strong>​手动触发更新​</strong>​：<code>shallowRef</code>需通过 <code>triggerRef()</code>强制更新视图（如直接修改 <code>.value</code>内部属性时）。</p>
</blockquote>
<h2 id="2-readonly与shallowReadonly"><a href="#2-readonly与shallowReadonly" class="headerlink" title="2. readonly与shallowReadonly"></a>2. <code>readonly</code>与<code>shallowReadonly</code></h2><h4 id="​​区别与选择​​"><a href="#​​区别与选择​​" class="headerlink" title="​​区别与选择​​"></a>​<strong>​区别与选择​</strong>​</h4><table>
<thead>
<tr>
<th>特性</th>
<th><code>readonly</code></th>
<th><code>shallowReadonly</code></th>
</tr>
</thead>
<tbody><tr>
<td>​<strong>​只读深度​</strong>​</td>
<td>递归所有嵌套属性</td>
<td>仅顶层属性</td>
</tr>
<tr>
<td>​<strong>​性能影响​</strong>​</td>
<td>较高（递归处理）</td>
<td>较低</td>
</tr>
<tr>
<td>​<strong>​使用场景​</strong>​</td>
<td>全局配置保护</td>
<td>部分保护 + 嵌套数据可修改</td>
</tr>
</tbody></table>
<p>​<strong>​示例代码​</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 深度只读（保护整个对象）</span></span><br><span class="line"><span class="keyword">const</span> config = <span class="title function_">readonly</span>(&#123; <span class="attr">api</span>: &#123; <span class="attr">endpoint</span>: <span class="string">&#x27;https://api.com&#x27;</span> &#125; &#125;);</span><br><span class="line">config.<span class="property">api</span>.<span class="property">endpoint</span> = <span class="string">&#x27;&#x27;</span>; <span class="comment">// 警告并阻止修改</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 浅层只读（允许修改嵌套属性）</span></span><br><span class="line"><span class="keyword">const</span> user = <span class="title function_">shallowReadonly</span>(&#123; <span class="attr">profile</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span> &#125; &#125;);</span><br><span class="line">user.<span class="property">profile</span>.<span class="property">name</span> = <span class="string">&#x27;Bob&#x27;</span>; <span class="comment">// 可修改</span></span><br></pre></td></tr></table></figure>

<h2 id="3-toRaw与markRaw"><a href="#3-toRaw与markRaw" class="headerlink" title="3. toRaw与markRaw"></a>3. <code>toRaw</code>与<code>markRaw</code></h2><h3 id="toRaw​​："><a href="#toRaw​​：" class="headerlink" title="toRaw​​："></a><code>toRaw</code>​​：</h3><p>返回响应式对象的原始非代理对象，操作原始对象不会触发视图更新。<br>​场景​​：与非 Vue 库交互时避免响应式干扰（如传给 D3.js）。</p>
<h3 id="markRaw​​："><a href="#markRaw​​：" class="headerlink" title="markRaw​​："></a><code>markRaw</code>​​：</h3><p>标记对象永不转为响应式，适用于静态数据或第三方类库实例。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> staticData = <span class="title function_">markRaw</span>([...]);</span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123; <span class="attr">list</span>: staticData &#125;); <span class="comment">// list 保持非响应式</span></span><br></pre></td></tr></table></figure>
<h2 id="4-customRef"><a href="#4-customRef" class="headerlink" title="4. customRef"></a>4. <code>customRef</code></h2><p>自定义 <code>ref</code>的依赖跟踪（<code>track</code>）和更新触发（<code>trigger</code>）逻辑。</p>
<h3 id="1-防抖-节流​：延迟触发视图更新"><a href="#1-防抖-节流​：延迟触发视图更新" class="headerlink" title="1. 防抖&#x2F;节流​：延迟触发视图更新"></a>1. 防抖&#x2F;节流​：延迟触发视图更新</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">useDebouncedRef</span>(<span class="params">value, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123; <span class="title function_">track</span>(); <span class="keyword">return</span> value; &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">newVal</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; value = newVal; <span class="title function_">trigger</span>(); &#125;, delay);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-本地存储同步：自动读写-localStorage。"><a href="#2-本地存储同步：自动读写-localStorage。" class="headerlink" title="2. 本地存储同步：自动读写 localStorage。"></a>2. 本地存储同步：自动读写 <code>localStorage</code>。</h3><h1 id="八、Vue3新组件"><a href="#八、Vue3新组件" class="headerlink" title="八、Vue3新组件"></a>八、Vue3新组件</h1><h2 id="1-teleport"><a href="#1-teleport" class="headerlink" title="1. teleport"></a>1. <code>teleport</code></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&#x27;body&#x27;&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">     &lt;h3&gt;hhh&lt;/h3&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>&lt;teleport&gt;&lt;/teleport&gt;</code>标签可以将对应内容传送到html对应位置</p>
</blockquote>
<h2 id="2-suspense"><a href="#2-suspense" class="headerlink" title="2. suspense"></a>2. <code>suspense</code></h2><p><code>src/components/Father.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;Suspense&#125; from &#x27;vue&#x27;; </span><br><span class="line">  import Child from &#x27;./Child.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;父组件标题&lt;/h2&gt;</span><br><span class="line">    </span><br><span class="line">   &lt;Suspense&gt;</span><br><span class="line">      &lt;template #default&gt;</span><br><span class="line">        &lt;Child/&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template #fallback&gt;</span><br><span class="line">        &lt;h2&gt;加载中&lt;/h2&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">      </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p><code>src/components/MingInput.vue</code>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">  import &#123;ref&#125; from &#x27;vue&#x27;;</span><br><span class="line">  import axios from &#x27;axios&#x27;;</span><br><span class="line">  </span><br><span class="line">  let sum = ref(0);</span><br><span class="line">  let &#123;data: &#123;content&#125;&#125; = await axios.get(&#x27;http://&#x27;);</span><br><span class="line">  console.log(content);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在子组件有异步操作时，异步完毕后显示<code>#default</code>的，异步操作进行中显示<code>#fallback</code>的内容</p>
</blockquote>
<h2 id="3-全局API转移到应用对象"><a href="#3-全局API转移到应用对象" class="headerlink" title="3. 全局API转移到应用对象"></a>3. 全局API转移到应用对象</h2><ul>
<li>app.component</li>
<li>app.config</li>
<li>app.directive</li>
<li>app.mount</li>
<li>app.unmount</li>
<li>app.use</li>
</ul>
<h2 id="4-其他"><a href="#4-其他" class="headerlink" title="4. 其他"></a>4. 其他</h2></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/DotRedStone.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/DotRedStone.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">DotRedStone</div><div class="post-copyright__author_desc">A Notes Web</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/')">Vue3笔记</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/png/wx.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/wx.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/png/al.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/png/al.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Vue3笔记&amp;url=http://blog.dotops.top/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.dotops.top" target="_blank">DotRedStone</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/Vue3/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>Vue3<span class="tagsPageCount">1</span></a></div></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/09/14/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/ts/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">TypeScript 笔记</div></div></a></div><div class="next-post pull-right"><a href="/2025/10/03/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.dotres.cn/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">SQL</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/DotRedStone.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">
这里本来应该有<b style="color:#fff">丰富的内容</b>，但目前博客刚搭建，啥都没有，先随便看看吧~
</div>
<div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">
<span id="author-easter-egg"></span>
</div>
<script>
(function() {
  var now = new Date();
  var hour = now.getHours();
  var egg = '';
  if (hour >= 3 && hour < 6) {
  egg = '凌晨三点还在逛博客？你是夜猫子还是早起的虫？快去睡觉吧，别熬秃了头！';
  } else {
  egg = '相信以后这里会有<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>，敬请期待！';
  }
  var el = document.getElementById('author-easter-egg');
  if (el) el.innerHTML = egg;
})();
</script>
</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/about"><h1 class="author-info__name">DotRedStone</h1><div class="author-info__desc">A Notes Web</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/DotRedStone" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><span id="announcement-egg"></span>
<script>
(function() {
  var now = new Date();
  var hour = now.getHours();
  var msg = '';
  if (hour >= 12 && hour < 14) {
    msg = '中午啦！博主饿了，欢迎投喂奶茶或美食~ 🍔🥤';
  } else if (hour >= 17 && hour < 19) {
    msg = '傍晚时分，能量告急，来点投喂支持一下博主吧！🍕🍰';
  } else {
    msg = '博客内容正在搬家中，主要是以前的 markdown 太随性，要统一风格，顺便考古一下旧笔记！';
  }
  var el = document.getElementById('announcement-egg');
  if (el) el.innerHTML = msg;
})();
</script>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAVue3%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">一、创建Vue3工程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99App%E7%BB%84%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">二、编写App组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">三、核心语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-setup"><span class="toc-number">3.1.</span> <span class="toc-text">1. setup()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.1.</span> <span class="toc-text">1. 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">3.1.2.</span> <span class="toc-text">2. 返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Setup-%E4%B8%8EOptionsAPI"><span class="toc-number">3.1.3.</span> <span class="toc-text">3. Setup()与OptionsAPI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">3.1.4.</span> <span class="toc-text">4. 语法糖</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%93%8D%E5%BA%94%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">2. 响应式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ref%E5%AE%9A%E4%B9%89%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. ref定义基本类型数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-reactive%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. reactive定义对象类型的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ref%E5%AE%9A%E4%B9%89%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">3.2.3.</span> <span class="toc-text">3. ref定义对象类型的数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ref%E5%AF%B9%E6%AF%94reactive"><span class="toc-number">3.2.4.</span> <span class="toc-text">4. ref对比reactive</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%8F%E8%A7%82%E8%A7%92%E5%BA%A6"><span class="toc-number">3.2.4.1.</span> <span class="toc-text">1. 宏观角度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%8C%BA%E5%88%AB"><span class="toc-number">3.2.4.2.</span> <span class="toc-text">2. 区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">3.2.4.3.</span> <span class="toc-text">3.使用原则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-toRefs%E4%B8%8EtoRef"><span class="toc-number">3.2.5.</span> <span class="toc-text">5.toRefs与toRef</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-computed"><span class="toc-number">3.3.</span> <span class="toc-text">3. computed()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-watch"><span class="toc-number">3.4.</span> <span class="toc-text">4. watch()</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%80"><span class="toc-number">3.4.1.</span> <span class="toc-text">情况一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%8C"><span class="toc-number">3.4.2.</span> <span class="toc-text">情况二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%89"><span class="toc-number">3.4.3.</span> <span class="toc-text">情况三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E5%9B%9B"><span class="toc-number">3.4.4.</span> <span class="toc-text">情况四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%94"><span class="toc-number">3.4.5.</span> <span class="toc-text">情况五</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-watchEffect"><span class="toc-number">3.5.</span> <span class="toc-text">5. watchEffect()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%A0%87%E7%AD%BE%E7%9A%84ref%E5%B1%9E%E6%80%A7"><span class="toc-number">3.6.</span> <span class="toc-text">6. 标签的ref属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-props"><span class="toc-number">3.7.</span> <span class="toc-text">7. props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.8.</span> <span class="toc-text">8. 生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Vue2-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.8.1.</span> <span class="toc-text">1. Vue2 生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Vue3-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.8.2.</span> <span class="toc-text">2. Vue3 生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Hooks"><span class="toc-number">3.9.</span> <span class="toc-text">9. Hooks</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">4.</span> <span class="toc-text">四、路由</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">4.1.</span> <span class="toc-text">1. 安装路由器组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%9F%BA%E6%9C%AC%E5%88%87%E6%8D%A2%E6%95%88%E6%9E%9C"><span class="toc-number">4.2.</span> <span class="toc-text">2. 基本切换效果</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.3.</span> <span class="toc-text">3. 注意事项</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.4.</span> <span class="toc-text">4. 路由器工作模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-to%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">4.5.</span> <span class="toc-text">5. to的两种写法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-number">4.6.</span> <span class="toc-text">6. 命名路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1"><span class="toc-number">4.7.</span> <span class="toc-text">7. 嵌套路由</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-query%E5%8F%82%E6%95%B0"><span class="toc-number">4.8.</span> <span class="toc-text">8. query参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-params%E5%8F%82%E6%95%B0"><span class="toc-number">4.9.</span> <span class="toc-text">9. params参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-props%E9%85%8D%E7%BD%AE"><span class="toc-number">4.10.</span> <span class="toc-text">10. props配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-replace%E5%B1%9E%E6%80%A7"><span class="toc-number">4.11.</span> <span class="toc-text">10. replace属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-number">4.12.</span> <span class="toc-text">10. 编程式路由导航</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.13.</span> <span class="toc-text">11. 重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81pinia"><span class="toc-number">5.</span> <span class="toc-text">五、pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%90%AD%E5%BB%BApinia%E7%8E%AF%E5%A2%83"><span class="toc-number">5.1.</span> <span class="toc-text">1. 搭建pinia环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%AD%98%E5%82%A8%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">5.2.</span> <span class="toc-text">2. 存储读取数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">5.3.</span> <span class="toc-text">3. 修改数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-storeToRefs"><span class="toc-number">5.4.</span> <span class="toc-text">4. storeToRefs()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-getters"><span class="toc-number">5.5.</span> <span class="toc-text">5. getters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-subscribe"><span class="toc-number">5.6.</span> <span class="toc-text">6. &#96;$subscribe()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-store%E7%9A%84%E7%BB%84%E5%90%88%E5%BC%8F%E5%86%99%E6%B3%95"><span class="toc-number">5.7.</span> <span class="toc-text">7. store的组合式写法</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-number">6.</span> <span class="toc-text">六、组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-props"><span class="toc-number">6.1.</span> <span class="toc-text">1. props</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">2. 自定义事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-mitt"><span class="toc-number">6.3.</span> <span class="toc-text">3. mitt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-v-model"><span class="toc-number">6.4.</span> <span class="toc-text">4. v-model</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-attrs"><span class="toc-number">6.5.</span> <span class="toc-text">5. $attrs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-refs%E4%B8%8E-parent"><span class="toc-number">6.6.</span> <span class="toc-text">6. $refs与$parent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-provide%E4%B8%8Einject"><span class="toc-number">6.7.</span> <span class="toc-text">7. provide与inject</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%8F%92%E6%A7%BD"><span class="toc-number">6.8.</span> <span class="toc-text">8. 插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">6.8.1.</span> <span class="toc-text">1. 默认插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">6.8.2.</span> <span class="toc-text">2. 具名插槽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">6.8.3.</span> <span class="toc-text">3. 作用域插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%85%B6%E4%BB%96API"><span class="toc-number">7.</span> <span class="toc-text">七、其他API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-shallowRef%E4%B8%8EshallowReactive"><span class="toc-number">7.1.</span> <span class="toc-text">1. shallowRef与shallowReactive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-readonly%E4%B8%8EshallowReadonly"><span class="toc-number">7.2.</span> <span class="toc-text">2. readonly与shallowReadonly</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%80%8B%E2%80%8B%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%89%E6%8B%A9%E2%80%8B%E2%80%8B"><span class="toc-number">7.2.0.1.</span> <span class="toc-text">​​区别与选择​​</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-toRaw%E4%B8%8EmarkRaw"><span class="toc-number">7.3.</span> <span class="toc-text">3. toRaw与markRaw</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#toRaw%E2%80%8B%E2%80%8B%EF%BC%9A"><span class="toc-number">7.3.1.</span> <span class="toc-text">toRaw​​：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#markRaw%E2%80%8B%E2%80%8B%EF%BC%9A"><span class="toc-number">7.3.2.</span> <span class="toc-text">markRaw​​：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-customRef"><span class="toc-number">7.4.</span> <span class="toc-text">4. customRef</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%98%B2%E6%8A%96-%E8%8A%82%E6%B5%81%E2%80%8B%EF%BC%9A%E5%BB%B6%E8%BF%9F%E8%A7%A6%E5%8F%91%E8%A7%86%E5%9B%BE%E6%9B%B4%E6%96%B0"><span class="toc-number">7.4.1.</span> <span class="toc-text">1. 防抖&#x2F;节流​：延迟触发视图更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E5%90%8C%E6%AD%A5%EF%BC%9A%E8%87%AA%E5%8A%A8%E8%AF%BB%E5%86%99-localStorage%E3%80%82"><span class="toc-number">7.4.2.</span> <span class="toc-text">2. 本地存储同步：自动读写 localStorage。</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81Vue3%E6%96%B0%E7%BB%84%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">八、Vue3新组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-teleport"><span class="toc-number">8.1.</span> <span class="toc-text">1. teleport</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-suspense"><span class="toc-number">8.2.</span> <span class="toc-text">2. suspense</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%85%A8%E5%B1%80API%E8%BD%AC%E7%A7%BB%E5%88%B0%E5%BA%94%E7%94%A8%E5%AF%B9%E8%B1%A1"><span class="toc-number">8.3.</span> <span class="toc-text">3. 全局API转移到应用对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96"><span class="toc-number">8.4.</span> <span class="toc-text">4. 其他</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/03/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL/" title="SQL"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://img.dotres.cn/" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQL"/></a><div class="content"><a class="title" href="/2025/10/03/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL/" title="SQL">SQL</a><time datetime="2025-10-02T16:00:00.000Z" title="发表于 2025-10-03 00:00:00">2025-10-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/01/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/Vue3/" title="Vue3笔记">Vue3笔记</a><time datetime="2025-09-30T16:00:00.000Z" title="发表于 2025-10-01 00:00:00">2025-10-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/14/%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%AB%AF/ts/" title="TypeScript 笔记">TypeScript 笔记</a><time datetime="2025-09-13T16:00:00.000Z" title="发表于 2025-09-14 00:00:00">2025-09-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/02/%E7%AC%94%E8%AE%B0/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7/F12%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7/" title="F12开发者工具">F12开发者工具</a><time datetime="2025-07-02T08:28:31.307Z" title="发表于 2025-07-02 16:28:31">2025-07-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/06/19/%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/" title="MySQL">MySQL</a><time datetime="2025-06-18T16:00:00.000Z" title="发表于 2025-06-19 00:00:00">2025-06-19</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:2724236945@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" href="tencent://AddContact/?fromId=0&amp;fromSubId=1&amp;subcmd=all&amp;uin=2724236945" title="qq"><i class="anzhiyufont anzhiyu-icon-qq"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/DotRedStone.jpg" size="50px"/><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/DotRedStone" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/明某-上课开小差.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="easytier" target="_blank" rel="noopener" href="https://easytier.cn/">easytier</a><a class="footer-item" title="文件快递柜" target="_blank" rel="noopener" href="https://filecodebox.dotres.cn/">文件快递柜</a><a class="footer-item" title="在线IDE" href="/code/">在线IDE</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo" title="博客框架为Hexo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px" data-title="本已在湘进行备案" title="本已在湘进行备案"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/湘ICP备_ 2025111357号.svg" alt="本已在湘进行备案"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="DotRedStone" target="_blank">DotRedStone</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = ["松间照影&#44; 石上流泉&#44; 此间清景&#44; 胜却千言.","云卷云舒&#44, 花谢花开&#44, 闲观万象&#44, 静候风来."]
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = result.data.content
      }
    })
  })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.cbd.int/typed.js@2.1.0/dist/typed.umd.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="湘ICP备2025111357号">湘ICP备2025111357号</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">存储服务</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://filecodebox.dotres.cn/" title="FileCodeBox"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/CloudFile.svg" alt="FileCodeBox"/><span class="back-menu-item-text">FileCodeBox</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://cloudreve.dotres.cn/" title="Cloudreve"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/CloudFolder.svg" alt="Cloudreve"/><span class="back-menu-item-text">Cloudreve</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://openlist.dotres.cn/" title="Openlist"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/CloudDrive.svg" alt="Openlist"/><span class="back-menu-item-text">Openlist</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">AI</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://nextchat.dotres.cn/" title="NextChat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/AI.svg" alt="NextChat"/><span class="back-menu-item-text">NextChat</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://lobechat.dotres.cn/" title="NextChat"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/AI.svg" alt="NextChat"/><span class="back-menu-item-text">NextChat</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">在线开发环境</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://gitea.dotres.cn/" title="Gitea"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/git.svg" alt="Gitea"/><span class="back-menu-item-text">Gitea</span></a><a class="back-menu-item" href="/code/" title="code-server"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/svg/CloudCode.svg" alt="code-server"/><span class="back-menu-item-text">code-server</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/nav/"><span> 导航</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 0.88rem;">CSS<sup>1</sup></a><a href="/tags/Cpp/" style="font-size: 0.88rem;">Cpp<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 0.88rem;">HTML<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 0.88rem;">Hexo<sup>1</sup></a><a href="/tags/JavaScript/" style="font-size: 0.88rem;">JavaScript<sup>1</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>1</sup></a><a href="/tags/TypeScript/" style="font-size: 0.88rem;">TypeScript<sup>1</sup></a><a href="/tags/Vue3/" style="font-size: 0.88rem;">Vue3<sup>1</sup></a><a href="/tags/easytier/" style="font-size: 0.88rem;">easytier<sup>1</sup></a><a href="/tags/jetbrains/" style="font-size: 0.88rem;">jetbrains<sup>1</sup></a><a href="/tags/p2p/" style="font-size: 0.88rem;">p2p<sup>1</sup></a><a href="/tags/vpn/" style="font-size: 0.88rem;">vpn<sup>1</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="4951071335" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/playlist?id=4951071335&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("06/01/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 DotRedStone 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("06/01/2025 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "/img/svg/明某-碎觉觉.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null

  const initWaline = (Fn) => {
    const waline = Fn(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-front.dotres.cn/',
      pageview: true,
      dark: 'html[data-theme="dark"]',
      path: window.location.pathname,
      comment: true,
      imageUploader: true,
    }, null))

    const destroyWaline = () => {
      waline.destroy()
    }

    anzhiyu.addGlobalFn('pjax', destroyWaline, 'destroyWaline')
  }

  const loadWaline = async () => {
    if (initFn) initWaline(initFn)
    else {
      await getCSS('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline.css')
      if (false) await getCSS('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline-meta.css')
      const { init } = await import('https://cdn.cbd.int/@waline/client@3.1.3/dist/waline.js')
      initFn = init || Waline.init
      initWaline(initFn)
      window.walineFn = initFn
    }
  }

  if ('Waline' === 'Waline' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = content => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = async () => {
    try {
      const res = await fetch('https://waline-front.dotres.cn/api/comment?type=recent&count=6', { method: 'GET' })
      const result = await res.json()
      const walineArray = result.data.map(e => {
        return {
          'content': changeContent(e.comment),
          'avatar': e.avatar,
          'nick': e.nick,
          'url': e.url + '#' + e.objectId,
          'date': e.time || e.insertedAt
        }
      })
      saveToLocal.set('waline-newest-comments', JSON.stringify(walineArray), 10/(60*24))
      generateHtml(walineArray)
    } catch (err) {
      console.error(err)
      const $dom = document.querySelector('#card-newest-comments .aside-list')
      $dom.textContent= "无法获取评论，请确认相关配置是否正确"
    }
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('waline-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>